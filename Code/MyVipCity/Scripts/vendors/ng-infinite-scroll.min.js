"use strict"; angular.module("infinite-scroll", []).value("THROTTLE_MILLISECONDS", null).directive("infiniteScroll", ["$rootScope", "$window", "$interval", "THROTTLE_MILLISECONDS", function (a, b, c, d) { return { scope: { infiniteScroll: "&", infiniteScrollContainer: "=", infiniteScrollDistance: "=", infiniteScrollDisabled: "=", infiniteScrollUseDocumentBottom: "=", infiniteScrollListenForEvent: "@" }, link: function (f, g, h) { function r(a) { var b = a[0] || a; return isNaN(b.offsetHeight) ? b.document.documentElement.clientHeight : b.offsetHeight } function s(a) { var b = a[0] || a; return isNaN(window.pageYOffset) ? b.document.documentElement.scrollTop : b.ownerDocument.defaultView.pageYOffset } function t(a) { if (a[0].getBoundingClientRect && !a.css("none")) return a[0].getBoundingClientRect().top + s(a) } function u() { var b = void 0, d = void 0; if (m === i) b = r(m) + s(m[0].document.documentElement), d = t(g) + r(g); else { b = r(m); var e = 0; void 0 !== t(m) && (e = t(m)), d = t(g) - e + r(g) } o && (d = r((g[0].ownerDocument || g[0].document).documentElement)); var h = d - b, n = h <= r(m) * j + 1; n ? (l = !0, k && (f.$$phase || a.$$phase ? f.infiniteScroll() : f.$apply(f.infiniteScroll))) : (q && c.cancel(q), l = !1) } function v(a, b) { function f() { return e = (new Date).getTime(), c.cancel(d), d = null, a.call() } function g() { var g = (new Date).getTime(), h = b - (g - e); h <= 0 ? (c.cancel(d), d = null, e = g, a.call()) : d || (d = c(f, h, 1)) } var d = null, e = 0; return g } function x() { m.unbind("scroll", w), null != p && (p(), p = null), q && c.cancel(q) } function y(a) { j = parseFloat(a) || 0 } function z(a) { k = !a, k && l && (l = !1, w()) } function A(a) { o = a } function B(a) { null != m && m.unbind("scroll", w), m = a, null != a && m.bind("scroll", w) } function C(a) { if (null != a && 0 !== a.length) { var b = void 0; if (b = a.nodeType && 1 === a.nodeType ? angular.element(a) : "function" == typeof a.append ? angular.element(a[a.length - 1]) : "string" == typeof a ? angular.element(document.querySelector(a)) : a, null == b) throw new Error("invalid infinite-scroll-container attribute."); B(b) } } function D() { return n && w(), c.cancel(q) } var i = angular.element(b), j = null, k = null, l = null, m = null, n = !0, o = !1, p = null, q = !1, w = null != d ? v(u, d) : u; return f.$on("$destroy", x), f.$watch("infiniteScrollDistance", y), y(f.infiniteScrollDistance), f.$watch("infiniteScrollDisabled", z), z(f.infiniteScrollDisabled), f.$watch("infiniteScrollUseDocumentBottom", A), A(f.infiniteScrollUseDocumentBottom), B(i), f.infiniteScrollListenForEvent && (p = a.$on(f.infiniteScrollListenForEvent, w)), f.$watch("infiniteScrollContainer", C), C(f.infiniteScrollContainer || []), null != h.infiniteScrollParent && B(angular.element(g.parent())), null != h.infiniteScrollImmediateCheck && (n = f.$eval(h.infiniteScrollImmediateCheck)), q = c(D) } } }]);